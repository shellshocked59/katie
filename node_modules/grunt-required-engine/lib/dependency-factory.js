var CONFIG = require('./config');
var Dependency = require('./dependency');
var _ = require('underscore');

processEngine = function(engine) {
    var version;
    
    if(engine == undefined) {
        version = CONFIG.NOT_GIVEN;
        
    } else if(Array.isArray(engine) ) {
        version = engines[0];
        
    } else if(_.isObject(engine)) {
        version = engine.node || '...';
        
    } else {
        version = engine;
    }
    
    return version.replace( 'node', '' ).trim();
};

module.exports = {
    createDependency: function(name, engine) {
        return new Dependency(name, processEngine(engine));
    }
};