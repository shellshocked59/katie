describe('grunt-required-engine (specs): ', function(){
    var expect = require("chai").expect;
    var grunt = require('grunt');
    var CONFIG = require('../lib/config');
    var requiredEngine;
    
    beforeEach(function() {
        CONFIG.BASE_PROJECT_DIR = 'test/mock-project/';
        requiredEngine = require('../lib/required-engine');
    });
    
    describe('getDependencies', function(){

        it('should load all dependencies A & B', function(){
            var dep;
            
            requiredEngine.init(['depA', 'depB']);
              deps = requiredEngine.getDependencies();
            
            expect(deps.length).to.equal(2);
            expect(deps[0].getName()).to.be.equal('depA');
            expect(deps[1].getName()).to.be.equal('depB');
        });
        
        it('should provide min engine between dependency A & B', function() {
            var CONFIG = require('../lib/config');
            CONFIG.BASE_PROJECT_DIR = 'test/mock-project/';
            
            requiredEngine.init(['depA', 'depB']);
            expect(requiredEngine.getLatestVersion()).to.be.equal('>0.10.4');
        });
        
        it('should provide max engine as empty between dependency A & B', function() {
            var CONFIG = require('../lib/config');
            CONFIG.BASE_PROJECT_DIR = 'test/mock-project/';
            
            requiredEngine.init(['depA', 'depB']);
            expect(requiredEngine.getGreatestVersion()).to.be.equal('');
        });
        
        it('should provide mix and max engines between dependency A & C', function() {
            var CONFIG = require('../lib/config');
            CONFIG.BASE_PROJECT_DIR = 'test/mock-project/';
            
            requiredEngine.init(['depA', 'depC']);
            expect(requiredEngine.getLatestVersion()).to.be.equal('>0.10.4');
            expect(requiredEngine.getGreatestVersion()).to.be.equal('<0.12.0');
        });
        
        it('should provide mix and max engines between dependency A, C & D', function() {
            var CONFIG = require('../lib/config');
            CONFIG.BASE_PROJECT_DIR = 'test/mock-project/';
            
            requiredEngine.init(['depA', 'depC', 'depD']);
            expect(requiredEngine.getLatestVersion()).to.be.equal('>0.10.4');
            expect(requiredEngine.getGreatestVersion()).to.be.equal('<0.12.0');
        });

      });

});